{"openapi":"3.0.0","paths":{"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":"Login successful. Returns JWT access token.","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"access_token":{"type":"string"}}}}}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"tags":["Auth"]}},"/auth/register/renter":{"post":{"operationId":"AuthController_createRenter","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RenterDto"}}}},"responses":{"201":{"description":"Renter created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"tags":["Auth"]}},"/auth/register/staff":{"post":{"operationId":"AuthController_createStaff","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StaffDto"}}}},"responses":{"201":{"description":"Staff created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"tags":["Auth"]}},"/auth/register/admin":{"post":{"operationId":"AuthController_createAdmin","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminDto"}}}},"responses":{"201":{"description":"Admin created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"tags":["Auth"]}},"/auth/send-otp":{"post":{"operationId":"AuthController_sendOtp","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendOtpDto"}}}},"responses":{"201":{"description":"OTP sent successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"tags":["Auth"]}},"/auth/verify-email":{"post":{"operationId":"AuthController_verifyEmail","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyOtpDto"}}}},"responses":{"201":{"description":"Email verified successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"tags":["Auth"]}},"/auth/reset-password":{"post":{"operationId":"AuthController_resetPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordDto"}}}},"responses":{"201":{"description":"Password reset successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"tags":["Auth"]}},"/users/renter":{"get":{"operationId":"UsersController_findAllUser","parameters":[{"name":"page","required":false,"in":"query","description":"Page number (starts from 1)","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"take","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"sortOrder","required":false,"in":"query","description":"Sort direction","schema":{"default":"DESC","example":"DESC","type":"string","enum":["ASC","DESC"]}},{"name":"search","required":false,"in":"query","description":"Search term to filter results","schema":{"example":"email |full_name | phone_number","type":"string"}},{"name":"sortBy","required":false,"in":"query","description":"Field to sort by","schema":{"example":"created_at | full_name | email | phone_number","type":"string"}},{"name":"statusKyc","required":false,"in":"query","schema":{"example":"submitted","type":"string","enum":["submitted","approved","rejected","expired"]}},{"name":"is_active","required":false,"in":"query","schema":{"type":"boolean"}}],"responses":{"200":{"description":"List of renters with populated roleExtra","content":{"application/json":{"schema":{"$ref":"#/components/schemas/672925c5ded7875f54c65"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Users"]}},"/users/staff":{"get":{"operationId":"UsersController_findAllStaff","parameters":[{"name":"page","required":false,"in":"query","description":"Page number (starts from 1)","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"take","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"sortOrder","required":false,"in":"query","description":"Sort direction","schema":{"default":"DESC","example":"DESC","type":"string","enum":["ASC","DESC"]}},{"name":"search","required":false,"in":"query","description":"Search term to filter results","schema":{"example":"email |full_name | phone_number","type":"string"}},{"name":"sortBy","required":false,"in":"query","description":"Field to sort by","schema":{"example":"full_name | email | created_at","type":"string"}},{"name":"position","required":false,"in":"query","description":"Position of the user","schema":{"example":"manager","type":"string"}},{"name":"employee_code","required":false,"in":"query","description":"Employee code of the user","schema":{"example":"EMP12345","type":"string"}},{"name":"is_active","required":false,"in":"query","description":"Status of the user (true = active)","schema":{"example":true,"type":"boolean"}}],"responses":{"200":{"description":"List of staff","content":{"application/json":{"schema":{"$ref":"#/components/schemas/72925c5ded7875f54c658"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Users"]}},"/users/{id}":{"get":{"operationId":"UsersController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User details with populated roleExtra","content":{"application/json":{"schema":{"$ref":"#/components/schemas/2925c5ded7875f54c6587"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Users"]},"delete":{"operationId":"UsersController_hardDelete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User hard deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Users"]}},"/users/update-renter/{id}":{"put":{"operationId":"UsersController_updateRenter","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateRenterDto"}}}},"responses":{"200":{"description":"Renter updated with populated roleExtra","content":{"application/json":{"schema":{"$ref":"#/components/schemas/925c5ded7875f54c65873"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Users"]}},"/users/update-staff/{id}":{"put":{"operationId":"UsersController_updateStaff","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStaffDto"}}}},"responses":{"200":{"description":"Staff updated with populated roleExtra","content":{"application/json":{"schema":{"$ref":"#/components/schemas/25c5ded7875f54c65873d"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Users"]}},"/users/soft-delete/{id}":{"patch":{"operationId":"UsersController_softDelete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User soft deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Users"]}},"/users/restore/{id}":{"patch":{"operationId":"UsersController_restore","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User status restored","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Users"]}},"/vehicle":{"post":{"operationId":"VehicleController_create","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"make":{"type":"string","example":"Tesla"},"model":{"type":"string","example":"Model 3"},"model_year":{"type":"number","example":2025},"category":{"type":"string","example":"EV"},"battery_capacity_kwh":{"type":"number","example":75},"range_km":{"type":"number","example":500},"vin_number":{"type":"string","example":"5YJ3E1EA7KF317XXX"},"license_plate":{"type":"string","example":"29A-12345","description":"Vehicle license plate"},"station_id":{"type":"string","example":"station_id"},"price_per_hour":{"type":"number","example":50000},"price_per_day":{"type":"number","example":300000},"deposit_amount":{"type":"number","example":500000},"label":{"type":"string","example":"Front view","description":"Optional image label/description"},"image":{"type":"string","format":"binary","description":"Vehicle image file (jpg, jpeg, png, gif, webp) - Max 5MB"}},"required":["make","model","model_year","category","station_id","price_per_hour","deposit_amount","price_per_day","vin_number","license_plate"]}}}},"responses":{"201":{"description":"Vehicle created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/c5ded7875f54c65873d57"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Vehicle"]},"get":{"operationId":"VehicleController_findAll","parameters":[{"name":"page","required":false,"in":"query","description":"Page number (starts from 1)","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"take","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"sortOrder","required":false,"in":"query","description":"Sort direction","schema":{"default":"DESC","example":"DESC","type":"string","enum":["ASC","DESC"]}},{"name":"search","required":false,"in":"query","description":"Search term to filter results","schema":{"example":"make | model","type":"string"}},{"name":"sortBy","required":false,"in":"query","description":"Year of the vehicle model","schema":{"example":2021,"type":"string"}},{"name":"is_active","required":false,"in":"query","description":"Status of the vehicle (true = active)","schema":{"example":true,"type":"boolean"}},{"name":"model_year","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":""},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"tags":["Vehicle"]}},"/vehicle/{id}":{"get":{"operationId":"VehicleController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"tags":["Vehicle"]},"put":{"operationId":"VehicleController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"make":{"type":"string","example":"Tesla"},"model":{"type":"string","example":"Model 3"},"model_year":{"type":"number","example":2025},"category":{"type":"string","example":"EV"},"battery_capacity_kwh":{"type":"number","example":75},"range_km":{"type":"number","example":500},"vin_number":{"type":"string","example":"5YJ3E1EA7KF317XXX"},"license_plate":{"type":"string","example":"29A-12345","description":"Vehicle license plate"},"station_id":{"type":"string","example":"station_id"},"price_per_hour":{"type":"number","example":50000},"price_per_day":{"type":"number","example":300000},"deposit_amount":{"type":"number","example":500000},"label":{"type":"string","example":"Front view","description":"Optional image label/description"},"image":{"type":"string","format":"binary","description":"Vehicle image file (jpg, jpeg, png, gif, webp) - Max 5MB"}}}}}},"responses":{"200":{"description":"Vehicle updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ded7875f54c65873d5729"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Vehicle"]},"delete":{"operationId":"VehicleController_hardDelete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Vehicle hard-deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Vehicle"]}},"/vehicle/change-status/{id}":{"patch":{"operationId":"VehicleController_changeStatus","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeStatusDto"}}}},"responses":{"200":{"description":"Vehicle status changed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Vehicle"]}},"/vehicle/restore/{id}":{"patch":{"operationId":"VehicleController_restore","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Vehicle restored","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Vehicle"]}},"/vehicle/soft-delete/{id}":{"patch":{"operationId":"VehicleController_softDelete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Vehicle soft-deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Vehicle"]}},"/kycs":{"post":{"operationId":"KycsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateKycsDto"}}}},"responses":{"201":{"description":"KYC created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/75f54c65873d57294c745"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Kycs"]}},"/kycs/{id}":{"put":{"operationId":"KycsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateKycsDto"}}}},"responses":{"200":{"description":"KYC updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/5f54c65873d57294c7458"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Kycs"]},"delete":{"operationId":"KycsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"KYC deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Kycs"]}},"/kycs/{id}/status":{"patch":{"operationId":"KycsController_changeStatus","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeKycStatusDto"}}}},"responses":{"200":{"description":"KYC status changed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/f54c65873d57294c74581"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Kycs"]}},"/bookings":{"post":{"operationId":"BookingController_createBooking","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBookingDto"}}}},"responses":{"201":{"description":"Booking created","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"payUrl":{"type":"string"}}}}}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Booking"]},"get":{"operationId":"BookingController_getAllBookings","parameters":[{"name":"page","required":false,"in":"query","description":"Page number (starts from 1)","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"take","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"sortOrder","required":false,"in":"query","description":"Sort direction","schema":{"default":"DESC","example":"DESC","type":"string","enum":["ASC","DESC"]}},{"name":"search","required":false,"in":"query","description":"Từ khóa tìm kiếm (full_name hoặc email của renter/staff)","schema":{"example":"email | full_name ","type":"string"}},{"name":"sortBy","required":false,"in":"query","description":"Field to sort by","schema":{"example":"total_booking_fee_amount | created_at | status","type":"string"}},{"name":"from_date","required":false,"in":"query","description":"Ngày bắt đầu lọc (format YYYY-MM-DD)","schema":{"example":"2025-10-01T00:00:00.000Z","type":"string"}},{"name":"to_date","required":false,"in":"query","description":"Ngày kết thúc lọc (format YYYY-MM-DD)","schema":{"example":"2025-10-31T23:59:59.000Z","type":"string"}},{"name":"statusBooking","required":false,"in":"query","description":"Trạng thái booking","schema":{"example":"pending_verification","type":"string","enum":["pending_verification","verified","cancelled"]}},{"name":"statusConfirm","required":false,"in":"query","description":"Trạng thái xác minh (confirm)","schema":{"example":"pending","type":"string","enum":["pending","approved","rejected_mismatch","rejected_other"]}},{"name":"method","required":false,"in":"query","description":"Phương thức thanh toán","schema":{"example":"cash","type":"string","enum":["unknown","cash","bank_transfer"]}}],"responses":{"200":{"description":"List of bookings with populated relationships","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingListResponse"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Booking"]}},"/bookings/confirm/{id}":{"patch":{"operationId":"BookingController_confirmBooking","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeStatusBookingDto"}}}},"responses":{"200":{"description":"Booking confirmed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/54c65873d57294c74581d"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Booking"]}},"/bookings/history-renter":{"get":{"operationId":"BookingController_getBookingsByRenter","parameters":[{"name":"page","required":false,"in":"query","description":"Page number (starts from 1)","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"take","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"sortOrder","required":false,"in":"query","description":"Sort direction","schema":{"default":"DESC","example":"DESC","type":"string","enum":["ASC","DESC"]}},{"name":"search","required":false,"in":"query","description":"Từ khóa tìm kiếm (full_name hoặc email của renter/staff)","schema":{"example":"email | full_name ","type":"string"}},{"name":"sortBy","required":false,"in":"query","description":"Field to sort by","schema":{"example":"total_booking_fee_amount | created_at | status","type":"string"}},{"name":"from_date","required":false,"in":"query","description":"Ngày bắt đầu lọc (format YYYY-MM-DD)","schema":{"example":"2025-10-01T00:00:00.000Z","type":"string"}},{"name":"to_date","required":false,"in":"query","description":"Ngày kết thúc lọc (format YYYY-MM-DD)","schema":{"example":"2025-10-31T23:59:59.000Z","type":"string"}},{"name":"statusBooking","required":false,"in":"query","description":"Trạng thái booking","schema":{"example":"pending_verification","type":"string","enum":["pending_verification","verified","cancelled"]}},{"name":"statusConfirm","required":false,"in":"query","description":"Trạng thái xác minh (confirm)","schema":{"example":"pending","type":"string","enum":["pending","approved","rejected_mismatch","rejected_other"]}},{"name":"method","required":false,"in":"query","description":"Phương thức thanh toán","schema":{"example":"cash","type":"string","enum":["unknown","cash","bank_transfer"]}}],"responses":{"200":{"description":""},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Booking"]}},"/bookings/{id}":{"get":{"operationId":"BookingController_getBookingById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Booking details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/4c65873d57294c74581db"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Booking"]}},"/bookings/cancel/{id}":{"patch":{"operationId":"BookingController_cancelBooking","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Booking cancelled","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Booking"]}},"/payments/confirm-cash/{id}":{"patch":{"operationId":"PaymentController_confirmBookingByCash","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Payment confirmed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Payment"]}},"/rentals":{"get":{"operationId":"RentalController_getAllRentals","parameters":[{"name":"page","required":false,"in":"query","description":"Page number (starts from 1)","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"take","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"sortOrder","required":false,"in":"query","description":"Sort direction","schema":{"default":"DESC","example":"DESC","type":"string","enum":["ASC","DESC"]}},{"name":"search","required":false,"in":"query","description":"Tìm kiếm theo email hoặc full_name của renter","schema":{"type":"string"}},{"name":"sortBy","required":false,"in":"query","description":"Field to sort by","schema":{"example":"created_at | pickup_datetime | status","type":"string"}},{"name":"status","required":false,"in":"query","description":"Trạng thái rental (reserved, in_progress, completed, cancelled, late)","schema":{"example":"reserved","type":"string","enum":["reserved","in_progress","completed","late","cancelled"]}},{"name":"from_date","required":false,"in":"query","description":"Ngày bắt đầu lọc theo pickup_datetime (ISO format)","schema":{"format":"date-time","example":"2025-10-01T00:00:00.000Z","type":"string"}},{"name":"to_date","required":false,"in":"query","description":"Ngày kết thúc lọc theo pickup_datetime (ISO format)","schema":{"format":"date-time","example":"2025-10-31T23:59:59.000Z","type":"string"}}],"responses":{"200":{"description":"List of rentals with populated booking, inspections, and contract"},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Rental"]}},"/rentals/{id}":{"get":{"operationId":"RentalController_getRentalById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Rental details with populated booking, inspections, and contract"},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Rental"]}},"/inspection":{"post":{"operationId":"InspectionsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateInspectionDto"}}}},"responses":{"201":{"description":"Inspection created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/c65873d57294c74581db9"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Inspections"]}},"/inspection/{id}/upload-photo":{"post":{"operationId":"InspectionsController_uploadPhoto","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"label":{"type":"string","description":"Nhãn mô tả cho ảnh (ví dụ: Ảnh trước khi thuê, Ảnh sau khi trả, etc.) - Optional","example":"Ảnh trước khi thuê"},"file":{"type":"string","format":"binary","description":"Image file (jpg, jpeg, png, gif, webp) - Max 5MB"}},"required":["file"]}}}},"responses":{"201":{"description":"Photo uploaded successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/5873d57294c74581db970"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Inspections"]}},"/inspection/{id}/photos":{"get":{"operationId":"InspectionsController_getPhotos","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"List of inspection photos","content":{"application/json":{"schema":{"$ref":"#/components/schemas/873d57294c74581db9703"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Inspections"]}},"/inspection/{id}/complete":{"post":{"operationId":"InspectionsController_completeInspection","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteInspectionDto"}}}},"responses":{"201":{"description":"Inspection completed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/73d57294c74581db97034"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Inspections"]}},"/inspection/{id}":{"delete":{"operationId":"InspectionsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Inspection deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Inspections"]}},"/contracts":{"post":{"operationId":"ContractController_create","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"rental_id":{"type":"string","description":"ID của rental (thuê xe)","example":"rental_id"},"label":{"type":"string","description":"Nhãn mô tả cho file hợp đồng (optional)","example":"Hợp đồng của anh Chấn 18/9"},"file":{"type":"string","format":"binary","description":"Contract document file (jpg, jpeg, png, pdf) - Max 10MB"}},"required":["rental_id","file"]}}}},"responses":{"201":{"description":"Contract created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/d57294c74581db970342e"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Contract"]}},"/contracts/{id}":{"put":{"operationId":"ContractController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"label":{"type":"string","description":"Nhãn mô tả cho file hợp đồng mới (optional)","example":"Hợp đồng cập nhật"},"file":{"type":"string","format":"binary","description":"Contract document file (jpg, jpeg, png, pdf) - Max 10MB - Optional"}}}}}},"responses":{"200":{"description":"Contract updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/7294c74581db970342e84"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Contract"]},"delete":{"operationId":"ContractController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Contract deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Contract"]}},"/station":{"post":{"operationId":"StationController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateStationDto"}}}},"responses":{"201":{"description":"Station created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ed7875f54c65873d57294"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Station"]},"get":{"operationId":"StationController_findAll","parameters":[{"name":"page","required":false,"in":"query","description":"Page number (starts from 1)","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"take","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":10,"example":10,"type":"number"}},{"name":"sortOrder","required":false,"in":"query","description":"Sort direction","schema":{"default":"DESC","example":"DESC","type":"string","enum":["ASC","DESC"]}},{"name":"search","required":false,"in":"query","description":"Search term to filter results","schema":{"example":"name | address ","type":"string"}},{"name":"sortBy","required":false,"in":"query","description":"Field to sort by","schema":{"example":"created_at | name","type":"string"}},{"name":"is_active","required":false,"in":"query","description":"Status of the Station (true = active)","schema":{"example":true,"type":"boolean"}}],"responses":{"200":{"description":"List of stations","content":{"application/json":{"schema":{"$ref":"#/components/schemas/d7875f54c65873d57294c"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"tags":["Station"]}},"/station/{id}":{"get":{"operationId":"StationController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Station details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/7875f54c65873d57294c7"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"tags":["Station"]},"put":{"operationId":"StationController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStationDto"}}}},"responses":{"200":{"description":"Station updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/875f54c65873d57294c74"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Station"]},"delete":{"operationId":"StationController_hardDelete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Station removed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Station"]}},"/station/restore/{id}":{"patch":{"operationId":"StationController_restore","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Station restored","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Station"]}},"/station/soft-delete/{id}":{"patch":{"operationId":"StationController_softDelete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Station removed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseMsg"}}}},"400":{"description":"Invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBadRequest"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUnauthorized"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseForbidden"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseNotFound"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseConflict"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseInternalError"}}}}},"security":[{"bearer":[]}],"tags":["Station"]}}},"info":{"title":"EV Station-based Rental System ","description":"The EV Station-based Rental System API ","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"ObjectId":{"type":"object","properties":{}},"Renter":{"type":"object","properties":{"user_id":{"$ref":"#/components/schemas/ObjectId"},"address":{"type":"string"},"date_of_birth":{"format":"date-time","type":"string"},"risk_score":{"type":"number"}},"required":["user_id"]},"Staff":{"type":"object","properties":{"user_id":{"$ref":"#/components/schemas/ObjectId"},"station_id":{"$ref":"#/components/schemas/ObjectId"},"employee_code":{"type":"string"},"position":{"type":"string"},"hire_date":{"format":"date-time","type":"string"}},"required":["user_id","station_id","employee_code","position","hire_date"]},"Admin":{"type":"object","properties":{"user_id":{"$ref":"#/components/schemas/ObjectId"},"title":{"type":"string"},"notes":{"type":"string"},"hire_date":{"format":"date-time","type":"string"}},"required":["user_id","hire_date"]},"LoginDto":{"type":"object","properties":{"email":{"type":"string","format":"email","example":"user@example.com","description":"Email of the account"},"password":{"type":"string","minLength":8,"example":"secretPassword","description":"Password of the account"}},"required":["email","password"]},"ResponseBadRequest":{"type":"object","properties":{"message":{"example":["Invalid request"],"type":"array","items":{"type":"string"}},"statusCode":{"type":"number","example":400}},"required":["message","statusCode"]},"ResponseUnauthorized":{"type":"object","properties":{"message":{"type":"string","example":"Unauthorized"},"statusCode":{"type":"number","example":401}},"required":["message","statusCode"]},"ResponseForbidden":{"type":"object","properties":{"message":{"type":"string","example":"Forbidden"},"statusCode":{"type":"number","example":403}},"required":["message","statusCode"]},"ResponseNotFound":{"type":"object","properties":{"message":{"type":"string","example":"Resource not found"},"statusCode":{"type":"number","example":404}},"required":["message","statusCode"]},"ResponseConflict":{"type":"object","properties":{"message":{"type":"string","example":"Conflict"},"statusCode":{"type":"number","example":409}},"required":["message","statusCode"]},"ResponseInternalError":{"type":"object","properties":{"message":{"type":"string","example":"Internal Server Error"},"statusCode":{"type":"number","example":500}},"required":["message","statusCode"]},"RenterDto":{"type":"object","properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"password":{"type":"string","minLength":8,"example":"your password"},"full_name":{"type":"string","example":"Nguyen Van A"},"phone":{"type":"string","description":"Your phone number (optional)","example":"0123456789"},"address":{"type":"string","description":"Address of the renter (optional)","example":"123 FPT"},"date_of_birth":{"type":"string","description":"Date of birth of the renter (ISO 8601 format)","example":"1990-01-01"}},"required":["email","password","full_name"]},"ResponseMsg":{"type":"object","properties":{"message":{"type":"string","example":"Action completed successfully"}},"required":["message"]},"StaffDto":{"type":"object","properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"password":{"type":"string","minLength":8,"example":"your password"},"full_name":{"type":"string","example":"Nguyen Van A"},"phone":{"type":"string","description":"Your phone number (optional)","example":"0123456789"},"position":{"type":"string","example":"Staff","description":""},"station_id":{"type":"string","example":"station_id","description":"Station ID (ObjectId as string)"}},"required":["email","password","full_name","position","station_id"]},"AdminDto":{"type":"object","properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"password":{"type":"string","minLength":8,"example":"your password"},"full_name":{"type":"string","example":"Nguyen Van A"},"phone":{"type":"string","description":"Your phone number (optional)","example":"0123456789"},"title":{"type":"string","example":"Manager","description":"Your title"},"notes":{"type":"string","example":"Some note","description":"Your note"}},"required":["email","password","full_name"]},"SendOtpDto":{"type":"object","properties":{"email":{"type":"string","format":"email","example":"user@example.com"}},"required":["email"]},"VerifyOtpDto":{"type":"object","properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"otp":{"type":"string","example":"123456","description":"The OTP code sent to your email"}},"required":["email","otp"]},"ResetPasswordDto":{"type":"object","properties":{"email":{"type":"string","format":"email","example":"user@example.com","description":"Email of the account"},"new_password":{"type":"string","minLength":8,"example":"secretPassword","description":"Password of the account"}},"required":["email","new_password"]},"User":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"full_name":{"type":"string"},"role":{"type":"string","enum":["unknown","renter","staff","admin"]},"is_active":{"type":"boolean"},"phone":{"type":"string"}},"required":["email","password","full_name","role","is_active","phone"]},"Kycs":{"type":"object","properties":{"renter_id":{"type":"string","description":"Renter ID reference"},"type":{"enum":["national_id","passport","driver_license","other"],"type":"string","description":"Type of KYC document","example":"driver_license"},"document_number":{"type":"string","description":"Document identification number"},"expiry_date":{"format":"date-time","type":"string","description":"Document expiry date"},"status":{"enum":["submitted","approved","rejected","expired"],"type":"string","description":"KYC verification status","example":"submitted"},"submitted_at":{"format":"date-time","type":"string","description":"Submission timestamp"},"verified_at":{"format":"date-time","type":"string","description":"Verification timestamp"}},"required":["renter_id","type","document_number","status","submitted_at"]},"Station":{"type":"object","properties":{"name":{"type":"string"},"address":{"type":"string"},"latitude":{"type":"number"},"longitude":{"type":"number"},"is_active":{"type":"boolean"}},"required":["name","address","is_active"]},"UserWithRoleExtra":{"type":"object","properties":{"roleExtra":{"oneOf":[{"$ref":"#/components/schemas/Renter"},{"$ref":"#/components/schemas/Staff"},{"$ref":"#/components/schemas/Admin"}],"description":"Role-specific extra information (Renter, Staff, or Admin)","nullable":true},"kycs":{"description":"KYC information (only populated for renters if exists)","nullable":true,"allOf":[{"$ref":"#/components/schemas/Kycs"}]},"email":{"type":"string"},"password":{"type":"string"},"full_name":{"type":"string"},"role":{"enum":["unknown","renter","staff","admin"],"type":"string"},"is_active":{"type":"boolean"},"phone":{"type":"string"}},"required":["email","password","full_name","role","is_active","phone"]},"672925c5ded7875f54c65":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/UserWithRoleExtra"}},"meta":{"type":"object","example":{"total":100,"page":1,"take":10,"totalPages":10}}},"required":["data","meta"]},"72925c5ded7875f54c658":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Staff"}},"meta":{"type":"object","example":{"total":100,"page":1,"take":10,"totalPages":10}}},"required":["data","meta"]},"2925c5ded7875f54c6587":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/UserWithRoleExtra"}]}},"required":["data"]},"UpdateRenterDto":{"type":"object","properties":{"full_name":{"type":"string","description":"Full name of user","example":"Nguyen Van A"},"phone":{"type":"string","description":"Phone number","example":"0901234567"},"address":{"type":"string","description":"Address","example":"123 Le Loi, HCM"},"date_of_birth":{"format":"date-time","type":"string","description":"Date of birth","example":"1990-01-01"}}},"925c5ded7875f54c65873":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/UserWithRoleExtra"}]}},"required":["data"]},"UpdateStaffDto":{"type":"object","properties":{"full_name":{"type":"string","description":"Full name of user","example":"Nguyen Van A"},"phone":{"type":"string","description":"Phone number","example":"0901234567"},"position":{"type":"string","description":"Position of staff","example":"Manager"},"station_id":{"type":"string","description":"Station ID where the staff is assigned","example":"652ab5678f1e8b0012abcd78"}}},"25c5ded7875f54c65873d":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/UserWithRoleExtra"}]}},"required":["data"]},"Vehicle":{"type":"object","properties":{"station_id":{"$ref":"#/components/schemas/ObjectId"},"make":{"type":"string"},"model":{"type":"string"},"model_year":{"type":"number"},"category":{"type":"string"},"battery_capacity_kwh":{"type":"number"},"range_km":{"type":"number"},"vin_number":{"type":"string"},"license_plate":{"type":"string"},"img_url":{"type":"string"},"is_active":{"type":"boolean"},"current_battery_capacity_kwh":{"type":"number"},"current_mileage":{"type":"number"},"status":{"type":"string","enum":["maintain","available","booked","pending_booking"]},"price_per_hour":{"type":"number"},"price_per_day":{"type":"number"},"deposit_amount":{"type":"number"},"image_kit_file_id":{"type":"string"}},"required":["make","model","model_year","category","license_plate","is_active","status","price_per_hour","deposit_amount"]},"c5ded7875f54c65873d57":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/Vehicle"}]}},"required":["data"]},"ded7875f54c65873d5729":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/Vehicle"}]}},"required":["data"]},"ChangeStatusDto":{"type":"object","properties":{"status":{"enum":["reserved","in_progress","completed","late","cancelled"],"type":"string","description":"Trạng thái mới của thuê xe","example":"reserved"}},"required":["status"]},"CreateKycsDto":{"type":"object","properties":{"type":{"enum":["national_id","passport","driver_license","other"],"type":"string","description":"Loại giấy tờ KYC","example":"driver_license"},"document_number":{"type":"string","description":"Số giấy tờ (CMND, CCCD, hộ chiếu...)","example":"123456789012"},"expiry_date":{"type":"string","description":"Ngày hết hạn của giấy tờ (ISO 8601 format)","example":"1990-01-01"}},"required":["type","document_number"]},"75f54c65873d57294c745":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/Kycs"}]}},"required":["data"]},"UpdateKycsDto":{"type":"object","properties":{"type":{"enum":["national_id","passport","driver_license","other"],"type":"string","description":"Loại giấy tờ KYC","example":"driver_license"},"document_number":{"type":"string","description":"Số giấy tờ (CMND, CCCD, hộ chiếu...)","example":"123456789012"},"expiry_date":{"type":"string","description":"Ngày hết hạn của giấy tờ (ISO 8601 format)","example":"1990-01-01"}}},"5f54c65873d57294c7458":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/Kycs"}]}},"required":["data"]},"ChangeKycStatusDto":{"type":"object","properties":{"status":{"type":"string","enum":["submitted","approved","rejected","expired"]}},"required":["status"]},"f54c65873d57294c74581":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/Kycs"}]}},"required":["data"]},"Booking":{"type":"object","properties":{"renter_id":{"$ref":"#/components/schemas/ObjectId"},"vehicle_id":{"$ref":"#/components/schemas/ObjectId"},"rental_start_datetime":{"format":"date-time","type":"string"},"expected_return_datetime":{"format":"date-time","type":"string"},"status":{"type":"string","enum":["pending_verification","verified","cancelled"]},"verification_status":{"type":"string","enum":["pending","approved","rejected_mismatch","rejected_other"]},"verified_by_staff_id":{"$ref":"#/components/schemas/ObjectId"},"verified_at":{"format":"date-time","type":"string"},"cancel_reason":{"type":"string"},"total_booking_fee_amount":{"type":"number"},"deposit_fee_amount":{"type":"number"},"rental_fee_amount":{"type":"number"},"rental_until":{"type":"string","enum":["hours","days"]}},"required":["renter_id","vehicle_id","rental_start_datetime","status","verification_status","total_booking_fee_amount","deposit_fee_amount","rental_fee_amount","rental_until"]},"CreateBookingDto":{"type":"object","properties":{"payment_method":{"enum":["unknown","cash","bank_transfer"],"type":"string","description":"Payment method","example":"bank_transfer"},"total_amount":{"type":"number","description":"Total amount for the booking","example":100000},"vehicle_id":{"type":"string","description":"Vehicle ID","example":"vehicle_id"},"rental_start_datetime":{"type":"string","description":"Expected rental start datetime","example":"2025-10-20T10:00:00.000Z"},"expected_return_datetime":{"type":"string","description":"Expected return datetime","example":"2025-10-25T10:00:00.000Z"},"rental_until":{"enum":["hours","days"],"type":"string","description":"Unit of rental duration (hours or days)","example":"hours"}},"required":["payment_method","total_amount","vehicle_id","rental_start_datetime","expected_return_datetime","rental_until"]},"ChangeStatusBookingDto":{"type":"object","properties":{"verification_status":{"enum":["pending","approved","rejected_mismatch","rejected_other"],"type":"string","description":"Booking verification status","example":"approved"},"cancel_reason":{"type":"string","description":"Reason for rejection (required when status is rejected)","example":"when the booking is rejected_mismatch, this field is required"}},"required":["verification_status"]},"54c65873d57294c74581d":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/Booking"}]}},"required":["data"]},"UserInResponse":{"type":"object","properties":{"_id":{"type":"string","example":"6901a99d315708186850886c"},"email":{"type":"string","example":"ttei8191@gmail.com"},"password":{"type":"string","example":"123123123"},"full_name":{"type":"string","example":"Chấn"},"role":{"type":"string","enum":["unknown","renter","staff","admin"],"example":"renter"},"is_active":{"type":"boolean","example":true},"created_at":{"format":"date-time","type":"string","example":"2025-10-29T05:43:57.595Z"},"__v":{"type":"number","example":0}},"required":["_id","email","password","full_name","role","is_active","created_at","__v"]},"RenterInResponse":{"type":"object","properties":{"_id":{"type":"string","example":"6901a99d315708186850886e"},"user_id":{"type":"string","example":"6901a99d315708186850886c"},"address":{"type":"string","example":"123456789"},"date_of_birth":{"format":"date-time","type":"string","example":"2004-12-28T00:00:00.000Z"},"risk_score":{"type":"number","example":0},"created_at":{"format":"date-time","type":"string","example":"2025-10-29T05:43:57.677Z"},"__v":{"type":"number","example":0},"user":{"$ref":"#/components/schemas/UserInResponse"}},"required":["_id","user_id","created_at","__v","user"]},"StaffInResponse":{"type":"object","properties":{"_id":{"type":"string","example":"6901a76d8e3f7ff9736ecbb6"},"user_id":{"type":"string","example":"6901a76d8e3f7ff9736ecbb4"},"station_id":{"type":"string","example":"6901a7378e3f7ff9736ecbb0"},"employee_code":{"type":"string","example":"661446"},"position":{"type":"string","example":"Staff"},"hire_date":{"format":"date-time","type":"string","example":"2025-10-29T05:34:37.128Z"},"created_at":{"format":"date-time","type":"string","example":"2025-10-29T05:34:37.129Z"},"__v":{"type":"number","example":0},"user":{"$ref":"#/components/schemas/UserInResponse"}},"required":["_id","user_id","station_id","employee_code","position","hire_date","created_at","__v","user"]},"PaymentInResponse":{"type":"object","properties":{"_id":{"type":"string","example":"69035fca16c1c4f90ca908bf"},"booking_id":{"type":"string","example":"69035fca16c1c4f90ca908b8"},"method":{"type":"string","enum":["unknown","cash","bank_transfer"],"example":"cash"},"status":{"type":"string","enum":["paid","refunded","failed","pending"],"example":"pending"},"amount_paid":{"type":"number","example":2000000},"transaction_code":{"type":"string","example":"CASH_1761828810317"},"created_at":{"format":"date-time","type":"string","example":"2025-10-30T12:53:30.555Z"},"__v":{"type":"number","example":0}},"required":["_id","booking_id","method","status","amount_paid","created_at","__v"]},"FeeInResponse":{"type":"object","properties":{"_id":{"type":"string","example":"69035fca16c1c4f90ca908bb"},"booking_id":{"type":"string","example":"69035fca16c1c4f90ca908b8"},"type":{"type":"string","enum":["rental_fee","deposit_fee","total_booking_fee","over_deposit_fee","late_return_fee","excess_mileage_fee","other"],"example":"rental_fee"},"description":{"type":"string","example":"Rental fee for 2 days"},"amount":{"type":"number","example":1000000},"currency":{"type":"string","example":"VND"},"created_at":{"format":"date-time","type":"string","example":"2025-10-30T12:53:30.442Z"},"__v":{"type":"number","example":0}},"required":["_id","booking_id","type","amount","currency","created_at","__v"]},"BookingListItemResponse":{"type":"object","properties":{"_id":{"type":"string","example":"69035fca16c1c4f90ca908b8"},"renter_id":{"type":"string","example":"6901a99d315708186850886e"},"vehicle_at_station_id":{"type":"string","example":"69035f5716c1c4f90ca9089b"},"rental_start_datetime":{"format":"date-time","type":"string","example":"2025-10-30T10:00:00.000Z"},"expected_return_datetime":{"format":"date-time","type":"string","example":"2025-11-01T10:00:00.000Z"},"status":{"type":"string","enum":["pending_verification","verified","cancelled"],"example":"verified"},"verification_status":{"type":"string","enum":["pending","approved","rejected_mismatch","rejected_other"],"example":"pending"},"total_booking_fee_amount":{"type":"number","example":2000000},"deposit_fee_amount":{"type":"number","example":1000000},"rental_fee_amount":{"type":"number","example":1000000},"created_at":{"format":"date-time","type":"string","example":"2025-10-30T12:53:30.318Z"},"__v":{"type":"number","example":0},"renter":{"$ref":"#/components/schemas/RenterInResponse"},"verified_by_staff":{"description":"May be empty object if not yet verified","allOf":[{"$ref":"#/components/schemas/StaffInResponse"}]},"payments":{"type":"array","items":{"$ref":"#/components/schemas/PaymentInResponse"}},"fees":{"type":"array","items":{"$ref":"#/components/schemas/FeeInResponse"}},"verified_at":{"format":"date-time","type":"string","example":"2025-10-30T09:07:24.256Z"},"verified_by_staff_id":{"type":"string","example":"6901a76d8e3f7ff9736ecbb6"}},"required":["_id","renter_id","vehicle_at_station_id","rental_start_datetime","status","verification_status","total_booking_fee_amount","deposit_fee_amount","rental_fee_amount","created_at","__v","renter","payments","fees"]},"BookingListMetaResponse":{"type":"object","properties":{"total":{"type":"number","example":3},"page":{"type":"number","example":1},"take":{"type":"number","example":10},"totalPages":{"type":"number","example":1}},"required":["total","page","take","totalPages"]},"BookingListResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/BookingListItemResponse"}},"meta":{"$ref":"#/components/schemas/BookingListMetaResponse"}},"required":["data","meta"]},"4c65873d57294c74581db":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/Booking"}]}},"required":["data"]},"Payment":{"type":"object","properties":{"booking_id":{"$ref":"#/components/schemas/ObjectId"},"method":{"type":"string","enum":["unknown","cash","bank_transfer"]},"status":{"type":"string","enum":["paid","refunded","failed","pending"]},"amount_paid":{"type":"number"},"transaction_code":{"type":"string"}},"required":["booking_id","method","status","amount_paid"]},"Inspection":{"type":"object","properties":{"rental_id":{"$ref":"#/components/schemas/ObjectId"},"type":{"type":"string","enum":["pre_rental","post_rental"]},"inspected_at":{"format":"date-time","type":"string"},"inspector_staff_id":{"$ref":"#/components/schemas/ObjectId"},"current_battery_capacity_kwh":{"type":"number"},"current_mileage":{"type":"number"}},"required":["rental_id","type","inspected_at","current_mileage"]},"Report":{"type":"object","properties":{"inspection_id":{"$ref":"#/components/schemas/ObjectId"},"damage_notes":{"type":"string"},"damage_found":{"type":"boolean"},"damage_price":{"type":"number"},"is_over_deposit":{"type":"boolean"},"over_deposit_fee_amount":{"type":"number"}},"required":["inspection_id","damage_found","damage_price","is_over_deposit","over_deposit_fee_amount"]},"ReportsPhoto":{"type":"object","properties":{"report_id":{"$ref":"#/components/schemas/ObjectId"},"inspection_id":{"$ref":"#/components/schemas/ObjectId"},"url":{"type":"string"},"label":{"type":"string"}},"required":["inspection_id","url"]},"CreateInspectionDto":{"type":"object","properties":{"rental_id":{"type":"string","description":"ID của rental đang được kiểm tra","example":"rental_id"},"type":{"enum":["pre_rental","post_rental"],"type":"string","description":"Loại kiểm tra: pre_rental hoặc post_rental","example":"pre_rental"},"inspected_at":{"format":"date-time","type":"string","description":"Thời điểm kiểm tra (mặc định là hiện tại)","example":"2025-10-28T10:00:00Z"},"current_battery_capacity_kwh":{"type":"number","description":"Dung lượng pin hiện tại (kWh)","example":45.5},"current_mileage":{"type":"number","description":"Số km hiện tại của xe","example":15000}},"required":["rental_id","type","current_mileage"]},"c65873d57294c74581db9":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/Inspection"}]}},"required":["data"]},"5873d57294c74581db970":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/ReportsPhoto"}]}},"required":["data"]},"873d57294c74581db9703":{"type":"object","properties":{"data":{"nullable":true,"type":"array","items":{"type":"string"}}},"required":["data"]},"CompleteInspectionDto":{"type":"object","properties":{"damage_found":{"type":"boolean","description":"Có phát hiện hư hỏng không","example":false},"damage_notes":{"type":"string","description":"Ghi chú về hư hỏng (nếu có)","example":"Vết xước nhỏ ở cửa phía trước"},"damage_price":{"type":"number","description":"Giá trị ước tính thiệt hại (VND)","example":500000,"default":0},"is_over_deposit":{"type":"boolean","description":"Thiệt hại có vượt quá tiền cọc không","example":false,"default":false},"over_deposit_fee_amount":{"type":"number","description":"Số tiền vượt quá tiền cọc (nếu có)","example":0,"default":0}},"required":["damage_found"]},"73d57294c74581db97034":{"type":"object","properties":{"data":{"type":"object","nullable":true}},"required":["data"]},"Contract":{"type":"object","properties":{"rental_id":{"$ref":"#/components/schemas/ObjectId"},"completed_at":{"format":"date-time","type":"string"},"document_url":{"type":"string"},"image_kit_file_id":{"type":"string"}},"required":["rental_id","document_url"]},"d57294c74581db970342e":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/Contract"}]}},"required":["data"]},"7294c74581db970342e84":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/Contract"}]}},"required":["data"]},"CreateStationDto":{"type":"object","properties":{"name":{"type":"string","description":"Name Station","example":"HCM"},"address":{"type":"string","description":"Address","example":"Q1"},"latitude":{"type":"number","description":"Latitude","example":10.762622},"longitude":{"type":"number","description":"Longitude","example":106.660172}},"required":["name","address"]},"ed7875f54c65873d57294":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/Station"}]}},"required":["data"]},"d7875f54c65873d57294c":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Station"}},"meta":{"type":"object","example":{"total":100,"page":1,"take":10,"totalPages":10}}},"required":["data","meta"]},"7875f54c65873d57294c7":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/Station"}]}},"required":["data"]},"UpdateStationDto":{"type":"object","properties":{"name":{"type":"string","description":"Name Station","example":"HCM"},"address":{"type":"string","description":"Address","example":"Q1"},"latitude":{"type":"number","description":"Latitude","example":10.762622},"longitude":{"type":"number","description":"Longitude","example":106.660172}}},"875f54c65873d57294c74":{"type":"object","properties":{"data":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/Station"}]}},"required":["data"]}}}}